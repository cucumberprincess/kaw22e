<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ì¹´ìš°íŠ¸ ë°°í‹€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');
        body {
            font-family: 'Jua', sans-serif;
            background: radial-gradient(circle at center, #fff7e6 0%, #ffddd2 50%, #fbd38d 100%);
            background-attachment: fixed;
            color: #4a4a4a;
        }
        .container {
            @apply min-h-screen flex items-center justify-center p-4 sm:p-8;
        }
        .game-wrapper {
            @apply w-full max-w-4xl p-6 rounded-3xl shadow-2xl;
            background-color: #fff;
            border: 8px solid #fbd38d; /* í™©ê¸ˆìƒ‰ í…Œë‘ë¦¬ */
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            position: relative; /* ì†Œë…€ ì´ë¯¸ì§€ ìœ„ì¹˜ë¥¼ ìœ„í•œ ì„¤ì • */
        }
        .chinese-girl {
            position: absolute;
            top: 20px;
            width: 80px;
            height: 80px;
        }
        .chinese-girl.left {
            left: -40px;
        }
        .chinese-girl.right {
            right: -40px;
        }
        .card {
            background-color: #fff;
            @apply p-8 rounded-3xl shadow-lg border-2 border-red-200;
        }
        .card-container {
            @apply flex flex-wrap justify-center gap-4 mt-6;
        }
        .game-card {
            @apply w-24 h-36 sm:w-28 sm:h-40 bg-red-50 rounded-2xl flex items-center justify-center font-bold text-2xl sm:text-3xl text-red-700 transform transition-all duration-300;
            box-shadow: inset 0 0 0 4px #fbd38d, 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .card-back {
            background-color: #8B0000; /* ì§„í•œ ë¶‰ì€ìƒ‰ */
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text x="50" y="50" dominant-baseline="middle" text-anchor="middle" font-size="60" fill="%23fbd38d">é¾</text></svg>');
            background-size: 80%;
            background-repeat: no-repeat;
            background-position: center;
            @apply w-24 h-36 sm:w-28 sm:h-40 rounded-2xl flex items-center justify-center font-bold text-3xl text-gray-500;
        }
        .log-container {
            @apply h-40 sm:h-48 overflow-y-auto mt-6 p-4 rounded-xl bg-gray-100 border border-gray-200 text-sm;
        }
        .button-group {
            @apply flex justify-center gap-4 mt-6;
        }
        .control-button {
            @apply bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-full shadow-md transition-all duration-300 transform hover:scale-105;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2), 0 0 10px #fbd38d;
        }
        .score-box {
            background-color: #fff;
            @apply rounded-2xl p-4 text-center shadow-md border-2 border-red-100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1), 0 0 8px #fbd38d;
        }
        .screen-curtain {
            @apply absolute inset-0 bg-white bg-opacity-95 flex items-center justify-center flex-col p-4 z-50;
        }
        .modal {
            @apply fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">
    <div class="relative w-full h-full game-wrapper">
        <!-- ì¤‘êµ­ ì†Œë…€ ì¼ëŸ¬ìŠ¤íŠ¸ -->
        <svg class="chinese-girl left" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <path fill="#f472b6" d="M50 0 C75 0, 85 20, 80 40 L60 60 L40 60 L20 40 C15 20, 25 0, 50 0 Z"/>
            <circle cx="50" cy="50" r="30" fill="#fbd38d" stroke="#ea580c" stroke-width="2"/>
            <path fill="#fff" d="M30 50 C40 40, 60 40, 70 50 L65 70 C60 80, 40 80, 35 70 Z"/>
            <path fill="#8B0000" d="M40 50 C45 55, 55 55, 60 50 L55 65 C50 70, 50 70, 45 65 Z"/>
        </svg>
        <svg class="chinese-girl right" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <path fill="#f472b6" d="M50 0 C75 0, 85 20, 80 40 L60 60 L40 60 L20 40 C15 20, 25 0, 50 0 Z"/>
            <circle cx="50" cy="50" r="30" fill="#fbd38d" stroke="#ea580c" stroke-width="2"/>
            <path fill="#fff" d="M30 50 C40 40, 60 40, 70 50 L65 70 C60 80, 40 80, 35 70 Z"/>
            <path fill="#8B0000" d="M40 50 C45 55, 55 55, 60 50 L55 65 C50 70, 50 70, 45 65 Z"/>
        </svg>

        <!-- ê²Œì„ UI -->
        <div class="container text-gray-800">
            <div class="card">
                <h1 class="text-3xl sm:text-4xl font-bold text-center mb-2 text-red-600">
                    âœ¨ ìŠ¤ì¹´ìš°íŠ¸ ë°°í‹€ âœ¨
                </h1>
                <p class="text-center text-gray-500 mb-6">ì¹œêµ¬ì™€ í•¨ê»˜ ìµœê³ ì˜ ì„ ìˆ˜ë¥¼ ì˜ì…í•˜ì„¸ìš”!</p>
                
                <div class="flex flex-col items-center gap-6">
                    <!-- ìƒëŒ€ í”Œë ˆì´ì–´ ì •ë³´ (í•­ìƒ í‘œì‹œ) -->
                    <div class="score-box w-full">
                        <h2 class="text-xl font-bold text-gray-500" id="opponentNameDisplay">ìƒëŒ€ í”Œë ˆì´ì–´</h2>
                        <div id="opponentCardContainer" class="flex justify-center mt-2">
                            <div class="card-back"></div>
                        </div>
                        <div class="text-xl font-bold mt-2">ì†Œì§€ê¸ˆ: <span id="opponentMoney">0</span>ì›</div>
                    </div>
                    
                    <!-- ê²Œì„ ì •ë³´ ë° ë¡œê·¸ -->
                    <div class="score-box w-full">
                        <p id="gameStatus" class="font-bold text-center text-lg mb-2 text-green-600">ê²Œì„ ì‹œì‘!</p>
                        <p class="text-center text-sm text-gray-400">
                            ì´ ë¼ìš´ë“œ: <span id="roundCount">0</span>
                            <br>
                            ì´ë²ˆ ë¼ìš´ë“œ ë² íŒ…: <span id="roundBet">0</span>ì›
                        </p>
                    </div>

                    <!-- í˜„ì¬ í”Œë ˆì´ì–´ ì •ë³´ -->
                    <div class="score-box w-full">
                        <h2 class="text-xl font-bold text-red-600" id="playerNameDisplay">ë‹¹ì‹ </h2>
                        <div id="playerHand" class="card-container">
                            <!-- í”Œë ˆì´ì–´ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                        </div>
                        <div class="text-xl font-bold mt-2">ì†Œì§€ê¸ˆ: <span id="playerMoney">0</span>ì›</div>
                    </div>

                    <!-- ë² íŒ… UI -->
                    <div id="bettingUI" class="flex flex-col items-center gap-4 mt-6 hidden">
                        <input type="number" id="betInput" min="10000" step="10000" placeholder="ë² íŒ… ê¸ˆì•¡" class="w-48 text-center rounded-full border-2 border-red-200 p-2 text-sm text-gray-800" />
                        <div class="button-group">
                            <button id="betButton" class="control-button">ë² íŒ…</button>
                            <button id="passButton" class="control-button bg-gray-400 hover:bg-gray-500">íŒ¨ìŠ¤</button>
                        </div>
                    </div>

                    <!-- ë²„íŠ¼ -->
                    <div id="buttonGroup" class="button-group">
                        <button id="restartButton" class="control-button">ê²Œì„ ì‹œì‘</button>
                    </div>
                </div>
                
                <div class="log-container" id="gameLog">
                    <!-- ê²Œì„ ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>

        <!-- í„´ ì „í™˜ í™”ë©´ -->
        <div id="turnCurtain" class="screen-curtain hidden">
            <h2 id="turnMessage" class="text-3xl sm:text-4xl font-bold text-red-700 mb-6 text-center"></h2>
            <button id="nextPlayerButton" class="control-button text-2xl px-8 py-4">
                ì‹œì‘
            </button>
        </div>

        <!-- ê²Œì„ íŠœí† ë¦¬ì–¼ ëª¨ë‹¬ -->
        <div id="tutorialModal" class="modal">
            <div class="card p-8 text-center max-w-lg">
                <h3 class="text-2xl font-bold text-red-600 mb-4">ê²Œì„ íŠœí† ë¦¬ì–¼</h3>
                <p class="mb-4 text-left">
                    ì¹œêµ¬ì™€ í•œ ê¸°ê¸°ë¡œ ì¦ê¸°ëŠ” 1ëŒ€1 ë² íŒ… ê²Œì„ì´ì—ìš”. 
                </p>
                <p class="mb-2 font-bold text-left">ğŸŒŸ ê·œì¹™</p>
                <ul class="text-sm text-left list-disc list-inside">
                    <li>ê° í”Œë ˆì´ì–´ëŠ” 100ë§Œ ì›ìœ¼ë¡œ ì‹œì‘í•´ìš”.</li>
                    <li>ë¼ìš´ë“œë§ˆë‹¤ 1~100 ì‚¬ì´ì˜ ì¹´ë“œ 2ì¥ì„ ë°›ì•„ìš”.</li>
                    <li>ë‘ ì¹´ë“œì˜ í•©ì‚° ì ìˆ˜ **(í•©ì‚° % 10)**ë¡œ ìŠ¹íŒ¨ë¥¼ ê°€ë ¤ìš”. (ì˜ˆ: 12 + 25 = 37 â†’ ì ìˆ˜ëŠ” 7)</li>
                    <li>ìì‹ ì˜ ì¹´ë“œë¥¼ ë³´ê³  ë² íŒ…í• ì§€, ì•„ë‹ˆë©´ íŒ¨ìŠ¤í• ì§€ ì„ íƒí•´ìš”.</li>
                    <li>ì´ê¸¸ ê²½ìš°, ìƒëŒ€ë°©ì˜ ë² íŒ… ê¸ˆì•¡ì„ ì–»ì–´ìš”. íŒ¨ë°°í•˜ë©´ ë² íŒ… ê¸ˆì•¡ì„ ìƒì–´ìš”.</li>
                    <li>ì†Œì§€ê¸ˆì´ 0ì›ì´ ë˜ë©´ ê²Œì„ì—ì„œ íŒ¨ë°°í•´ìš”!</li>
                </ul>
                <button id="closeTutorialButton" class="control-button mt-6">ê²Œì„ ì‹œì‘í•˜ê¸°</button>
            </div>
        </div>
        
        <!-- ë©”ì‹œì§€ ëª¨ë‹¬ -->
        <div id="messageModal" class="modal hidden">
            <div class="card p-8 text-center max-w-sm">
                <h3 class="text-xl font-bold text-red-600 mb-4" id="messageTitle">ì•Œë¦¼</h3>
                <p class="mb-6 text-base" id="messageContent"></p>
                <button id="closeMessageButton" class="control-button">í™•ì¸</button>
            </div>
        </div>

    </div>

    <script type="module">
        // ê²Œì„ ìƒíƒœ ë³€ìˆ˜
        const players = ["í”Œë ˆì´ì–´ 1", "í”Œë ˆì´ì–´ 2"];
        let playerMoney = {};
        let playerHands = {};
        let playerBets = {};
        let roundCount = 0;
        let currentTurn = 0;
        let isGameActive = false;

        // DOM ìš”ì†Œ
        const playerHandDiv = document.getElementById('playerHand');
        const opponentCardContainer = document.getElementById('opponentCardContainer');
        const gameStatus = document.getElementById('gameStatus');
        const playerMoneySpan = document.getElementById('playerMoney');
        const opponentMoneySpan = document.getElementById('opponentMoney');
        const roundCountSpan = document.getElementById('roundCount');
        const roundBetSpan = document.getElementById('roundBet');
        const gameLogDiv = document.getElementById('gameLog');
        const restartButton = document.getElementById('restartButton');
        const turnCurtain = document.getElementById('turnCurtain');
        const turnMessage = document.getElementById('turnMessage');
        const nextPlayerButton = document.getElementById('nextPlayerButton');
        const playerNameDisplay = document.getElementById('playerNameDisplay');
        const opponentNameDisplay = document.getElementById('opponentNameDisplay');
        const bettingUI = document.getElementById('bettingUI');
        const betInput = document.getElementById('betInput');
        const betButton = document.getElementById('betButton');
        const passButton = document.getElementById('passButton');
        const tutorialModal = document.getElementById('tutorialModal');
        const closeTutorialButton = document.getElementById('closeTutorialButton');
        const messageModal = document.getElementById('messageModal');
        const messageContent = document.getElementById('messageContent');
        const closeMessageButton = document.getElementById('closeMessageButton');

        // ê²Œì„ ë¡œê·¸ ì¶œë ¥ í•¨ìˆ˜
        const logMessage = (message) => {
            const p = document.createElement('p');
            p.textContent = message;
            gameLogDiv.appendChild(p);
            gameLogDiv.scrollTop = gameLogDiv.scrollHeight;
        };

        // ë©”ì‹œì§€ ëª¨ë‹¬ í‘œì‹œ í•¨ìˆ˜ (alert() ëŒ€ì²´)
        const showMessage = (message) => {
            messageContent.textContent = message;
            messageModal.classList.remove('hidden');
        };

        // ê²Œì„ ì´ˆê¸°í™”
        const initializeGame = () => {
            playerMoney = {};
            playerMoney[players[0]] = 1000000;
            playerMoney[players[1]] = 1000000;
            
            playerHands = {};
            playerBets = {};
            roundCount = 0;
            currentTurn = 0;
            isGameActive = true;
            
            gameLogDiv.innerHTML = '';
            updateScores();
            
            restartButton.
